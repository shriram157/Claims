<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:l="sap.ui.layout" xmlns="sap.m"
	xmlns:table="sap.ui.table" xmlns:html="http://www.w3.org/1999/xhtml">
	<VBox class="sapUiSmallMargin clFormTitleGap">
		<Panel width="100%" class="sapUiSmallMarginBottom">
			<headerToolbar>
				<Toolbar height="3rem">
					<Title text="{i18n>ClaimDetails}"/>
					<ToolbarSpacer/>
					<Title text="{LocalDataModel>/WarrantyClaimNumber}" textAlign="End"/>
				</Toolbar>
			</headerToolbar>
			<f:SimpleForm editable="true" layout="ResponsiveGridLayout" title="" labelSpanXL="6" labelSpanL="6" labelSpanM="12" labelSpanS="12"
				adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="6" columnsL="6" columnsM="4"
				singleContainerFullSize="false">
				<f:content>
					<core:Title text=""/>
					<Label text="TCI Claim #"/>
					<Text text="{HeadSetData>/NumberOfWarrantyClaim}"/>
					<Label text="VIN">
						<layoutData>
							<l:GridData span="XL3 L3"/>
						</layoutData>
					</Label>
					<Text text="{HeadSetData>/ExternalObjectNumber}"/>
					<core:Title text=""/>
					<Label text="Dlr. Claim #"/>
					<Text text="{HeadSetData>/ExternalNumberOfClaim}"/>
					<Label text="OFP">
						<layoutData>
							<l:GridData span="XL3 L4"/>
						</layoutData>
					</Label>
					<Text text="{HeadSetData>/OFP}"/>
					<core:Title text=""/>
					<Label text="RO #."/>
					<Text text="{HeadSetData>/RepairOrderNumberExternal}"/>
					<Label text="Op #."/>
					<Text text="{HeadSetData>/MainOpsCode}"/>
					<core:Title text=""/>
					<Label text="Repair Date"/>
					<Text
						text="{path:'HeadSetData>/RepairDate', type: 'sap.ui.model.type.Date', constraints: {displayFormat: 'Date' }, formatOptions: { style: 'medium', strictParsing: true , UTC: true}}"/>
					<Label text="Reg. Date"/>
					<Text text="{path:'HeadSetData>/RegDate'}"/>
					<core:Title text=""/>
					<Label text="Odometer"/>
					<Text text="{HeadSetData>/Odometer}"/>
					<Label text="Elapse"/>
					<Text text="{HeadSetData>/ElapsedMonths}"/>
					<core:Title text=""/>
					<Label text="Type"/>
					<Text text="{HeadSetData>/WarrantyClaimType}"/>
					<Label text="Status"/>
					<Text text="{HeadSetData>/ProcessingStatusOfWarrantyClm}"/>
				</f:content>
			</f:SimpleForm>
		</Panel>
		<f:SimpleForm  editable="true" layout="ResponsiveGridLayout" title="Authorization Details" labelSpanXL="3"
			labelSpanL="3" labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0"
			columnsXL="2" columnsL="1" columnsM="1" singleContainerFullSize="false">
			<f:content>
				<core:Title text=""/>
				<Label text="Authorization No." visible="{LocalDataModel>/linkToAuth}"/>
				<Input value="{DataPercetCalculate>/AuthorizationNumber}" visible="{LocalDataModel>/linkToAuth}"/>
				<Button text="Link to Authorization" press="onPressLinkAuthorization" visible="{LocalDataModel>/linkToAuth}"/>
			</f:content>
		</f:SimpleForm>
		<f:SimpleForm id="idAuthorizationForm" editable="true" layout="ResponsiveGridLayout" title="" labelSpanXL="6"
			labelSpanL="6" labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0"
			columnsXL="3" columnsL="3" columnsM="2" singleContainerFullSize="false">
			
			<f:content>
				<core:Title text=""/>
				<Label text="TCI Claim #"/>
				<Text text="{LocalDataModel>/DataAuthDetails/TCIClaimNo}"/>
				<Label text="Authorization Type"/>
				<Text text="{LocalDataModel>/DataAuthDetails/Type}"/>
				<Label text="Total Claim Amount (CAD)"/>
				<Text text="{LocalDataModel>/DataAuthDetails/TotalClaimAmountCAD}"/>
				<core:Title text=""/>
				<Label text="Territory Code"/>
				<Text text="{LocalDataModel>/DataAuthDetails/TerritoryCode}"/>
				<Label text="Authorization Date"/>
				<Text text="{ path: 'LocalDataModel>/DataAuthDetails/AuthorizationDate', type: 'sap.ui.model.type.Date', formatOptions: { style: 'medium' } }"/>
				<core:Title text=""/>
				<Label text="Dealer Authorization Level"/>
				<Text text="{LocalDataModel>/DataAuthDetails/DealerAuthorizationLevel}"/>
				<Label text="Claim Submission Type"/>
				<Text text="{LocalDataModel>/DataAuthDetails/ClaimSubmissionType}"/>
				<Button text="Save Claim" press="onPressSave" type="Emphasized"/>
			</f:content>
		</f:SimpleForm>
		<l:VerticalLayout width="100%" class="gridWrapper">
		<l:Grid containerQuery="true" defaultSpan="XL6 L6 M12 S12">
			<html:div class="exampleDiv">
				<Table showSeparators="All">
					<columns>
						<Column  hAlign="Center"></Column>
						<Column  hAlign="Center">
							<Label text="Repair Amount"/>
						</Column>
						<Column hAlign="Center">
							<Label text="Customer"/>
						</Column>
						<Column  hAlign="Center">
							<Label text="Dealer"/>
						</Column>
						<Column  hAlign="Center">
							<Label text="TCI"/>
						</Column>
					</columns>
					<items>
						<ColumnListItem>
							<cells>
								<Text text="Participation % :"/>
								<Text text=""/>
								<Select items="{LocalDataModel>/DataPercent}" enabled="{LocalDataModel>/PercentState}" selectedKey="{path:'DataPercetCalculate>/CustomerPer'}" >
									<core:Item key="{LocalDataModel>okey}" text="{LocalDataModel>num}"/>
								</Select>
								<Select items="{LocalDataModel>/DataPercent}" enabled="{LocalDataModel>/PercentState}" selectedKey="{DataPercetCalculate>/DealerPer}">
									<core:Item key="{LocalDataModel>okey}" text="{LocalDataModel>num}"/>
								</Select>
								<Select items="{LocalDataModel>/DataPercent}" enabled="{LocalDataModel>/PercentState}" selectedKey="{DataPercetCalculate>/TCIPer}">
									<core:Item key="{LocalDataModel>okey}" text="{LocalDataModel>num}"/>
								</Select>
							</cells>
						</ColumnListItem>
						<ColumnListItem>
							<cells>
								<Text text="Participation $:"/>
								<Text text="{DataPercetCalculate>/RepairAmt}"/>
								<Text text="{DataPercetCalculate>/CustomerAmt}"/>
								<Text text="{DataPercetCalculate>/DealerAmt}"/>
								<Text text="{DataPercetCalculate>/TCIAmt}"/>
							</cells>
						</ColumnListItem>
					</items>
				</Table>
			</html:div>
			
			<html:div ><Button text="Re-calculate Claim Amount" visible="{LocalDataModel>/reCalculate}" press="onPressRecalculate" type="Emphasized"/></html:div>
		</l:Grid>
		</l:VerticalLayout>
		
		<table:Table class="classRCPTable" selectionMode="Single" rows="{path:'LocalDataModel>/ClaimSumAuth'}" visibleRowCountMode="Auto"
			rowSelectionChange="onNavigate" selectionBehavior="Row" showNoData="true" threshold="20" enableBusyIndicator="true">
			<table:columns autoResizable="true">
				<table:Column width="17rem">
					<table:multiLabels>
						<Label text="" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="{LocalDataModel>ItemType}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="Amount" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="{LocalDataModel>Amount}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="Mark-up %" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="{path:'LocalDataModel>MarkupRate', formatter:'zclaimProcessing.utils.formatter.fnFormatPercent'}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="Mark-up Amount" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="{path:'LocalDataModel>MarkupAmt'}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="Sub-total" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="{LocalDataModel>SubtotalAmt}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="Discount %" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="{path:'LocalDataModel>DiscountRate', formatter:'zclaimProcessing.utils.formatter.fnFormatPercent'}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="Discount Amount" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="{LocalDataModel>DiscountAmt}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="Claim Amount" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="{LocalDataModel>ClaimAmt}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="Authorized Amount" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="{LocalDataModel>AuthAmt}" wrapping="true"/>
					</table:template>
				</table:Column>
			</table:columns>
		</table:Table>
	</VBox>
	<VBox justifyContent="Center" alignContent="Center" alignItems="Center" class="sapUiLargeMarginBottom">
		<Text class="sapUiSmallMarginBottom" text="What is the source of this info. Authorization that was converted to Calim?"/>
		<HBox>
			<Button text="Back" class="sapUiTinyMarginEnd" type="Back" press="onStep02Back"/>
			<Button text="Next" type="Emphasized" press="onStep02Next"/>
		</HBox>
	</VBox>
</core:FragmentDefinition>