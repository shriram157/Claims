<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:l="sap.ui.layout" xmlns="sap.m"
	xmlns:table="sap.ui.table" xmlns:html="http://www.w3.org/1999/xhtml">
	<VBox class="sapUiSmallMargin clFormTitleGap">
		<Panel width="100%" class="sapUiSmallMarginBottom">
			<headerToolbar>
				<Toolbar height="3rem">
					<Title text="{i18n>ClaimDetails}"/>
					<ToolbarSpacer/>
					<Title text="{LocalDataModel>/WarrantyClaimNumber}" textAlign="End"/>
				</Toolbar>
			</headerToolbar>
			<f:SimpleForm editable="true" layout="ResponsiveGridLayout" title="" labelSpanXL="6" labelSpanL="6" labelSpanM="12" labelSpanS="12"
				adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="6" columnsL="6" columnsM="4"
				singleContainerFullSize="false">
				<f:content>
					<core:Title text=""/>
					<Label text="{i18n>TCIClaim}"/>
					<Text text="{HeadSetData>/NumberOfWarrantyClaim}"/>
					<Label text="{i18n>VIN}">
						<layoutData>
							<l:GridData span="XL3 L3"/>
						</layoutData>
					</Label>
					<Text text="{HeadSetData>/ExternalObjectNumber}" wrapping="false"/>
					<core:Title text=""/>
					<Label text="{i18n>DlrClaim}"/>
					<Text text="{HeadSetData>/ExternalNumberOfClaim}"/>
					<Label text="{i18n>OFP}">
						<layoutData>
							<l:GridData span="XL3 L4"/>
						</layoutData>
					</Label>
					<Text text="{HeadSetData>/OFP}"/>
					<core:Title text=""/>
					<Label text="{i18n>RO}"/>
					<Text text="{HeadSetData>/RepairOrderNumberExternal}"/>
					<Label text="{i18n>Op}"/>
					<Text text="{HeadSetData>/MainOpsCode}"/>
					<core:Title text=""/>
					<Label text="{i18n>RepairDate}"/>
					<Text text="{path:'HeadSetData>/RepairDate', formatter:'zclaimProcessing.utils.formatter.fnDateFormat'}"/>
					<Label text="{i18n>RegDate}"/>
					<Text text="{path:'LocalDataModel>/DataVinDetails/RegDate', formatter:'zclaimProcessing.utils.formatter.fnDateFormat'}"/>
					<core:Title text=""/>
					<Label text="{i18n>Odometer}" textAlign="End">
						<layoutData>
							<l:GridData span="XL5 L5 M6 "/>
						</layoutData>
					</Label>
					<Text text="{path:'HeadSetData>/Odometer', formatter:'zclaimProcessing.utils.formatter.fnFormatNum'}" textAlign="End">
						<layoutData>
							<l:GridData span="XL4 L4 M6 "/>
						</layoutData>
					</Text>
					<Text text="{LocalDataModel>/MsrUnit}" visible="{DateModel>/OdometerReqMan}">
						<layoutData>
							<l:GridData span="XL3 L3 M3 "/>
						</layoutData>
					</Text>
					<Label text="{i18n>Elapse}"/>
					<Text text="{LocalDataModel>/VehicleMonths} {i18n>Months}"/>
					<core:Title text=""/>
					<Label text="{i18n>Type}"/>
					<Text text="{HeadSetData>/WarrantyClaimType}"/>
					<Label text="{i18n>Status}"/>
					<Text text="{HeadSetData>/DecisionCode}"/>
				</f:content>
			</f:SimpleForm>
		</Panel>
		<f:SimpleForm editable="true" layout="ResponsiveGridLayout" title="{i18n>AuthorizationDetails}" labelSpanXL="3" labelSpanL="3"
			labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="2"
			columnsL="2" columnsM="1" singleContainerFullSize="false">
			<f:content>
				<core:Title text=""/>
				<Label text="{i18n>AuthorizationNo}" visible="{LocalDataModel>/linkToAuth}"/>
				<Input id="idAuthNum" value="{DataPercetCalculate>/AuthorizationNumber}" enabled="{DateModel>/oFormEdit}"
					visible="{LocalDataModel>/linkToAuth}"/>
				<Button text="{i18n>LinktoAuthorization}" press="onPressLinkAuthorization" enabled="{DateModel>/oFormEdit}"
					visible="{LocalDataModel>/linkToAuth}"/>
			</f:content>
		</f:SimpleForm>
		<f:SimpleForm id="idAuthorizationForm" editable="true" layout="ResponsiveGridLayout" title="" labelSpanXL="6" labelSpanL="6" labelSpanM="12"
			labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="3" columnsL="3" columnsM="2"
			singleContainerFullSize="false">
			<f:content>
				<core:Title text=""/>
				<Label text="{i18n>TCIClaim}"/>
				<Text text="{LocalDataModel>/DataAuthDetails/TCIClaimNo}"/>
				<Label text="{i18n>AuthorizationType}"/>
				<Text text="{LocalDataModel>/DataAuthDetails/AuthorizationType}"/>
				<Label text="{i18n>TotalClaimAmountCAD}"/>
				<Text text="{LocalDataModel>/DataAuthDetails/TotalClaimAmountCAD}"/>
				<core:Title text=""/>
				<Label text="{i18n>TerritoryCode}"/>
				<Text text="{LocalDataModel>/DataAuthDetails/TerritoryCode}"/>
				<Label text="{i18n>AuthorizationDate}"/>
				<Text
					text="{ path: 'LocalDataModel>/DataAuthDetails/AuthorizationDate', type: 'sap.ui.model.type.Date', formatOptions: { style: 'medium' } }"/>
				<core:Title text=""/>
				<Label text="{i18n>DealerAuthorizationLevel}"/>
				<Text text="{LocalDataModel>/DataAuthDetails/DealerAuthorizationLevel}"/>
				<Label text="{i18n>ClaimSubmissionType}"/>
				<Text text="{LocalDataModel>/DataAuthDetails/ClaimSubmissionType}"/>
				<!--<Button text="Save Claim" press="onPressSave" type="Emphasized"/>-->
			</f:content>
		</f:SimpleForm>
		<l:VerticalLayout width="100%" class="gridWrapper">
			<VBox>
				<Text class="sapUiSmallMarginBegin" text="{i18n>PricingOptions}"/>
				<RadioButtonGroup columns="2" select="onSelectAuthPricingOpt" id="idPricingOpt">
					<buttons>
						<RadioButton id="RB4-1" text="{i18n>Participation}"/>
						<RadioButton id="RB4-2" text="{i18n>DiscountPercentageOption}"/>
					</buttons>
				</RadioButtonGroup>
			</VBox>
			<l:Grid containerQuery="true" defaultSpan="XL6 L12 M12 S12">
				<html:div class="exampleDiv">
					<Table showSeparators="All" busy="{LocalDataModel>/discountBusyIndicator}" id="idParticiaptionTable">
						<columns>
							<Column hAlign="Center"></Column>
							<Column hAlign="Center">
								<Label text="{i18n>RepairAmount}"/>
							</Column>
							<Column hAlign="Center">
								<Label text="{i18n>Customer}"/>
							</Column>
							<Column hAlign="Center">
								<Label text="{i18n>Dealer}"/>
							</Column>
							<Column hAlign="Center">
								<Label text="{i18n>TCI}"/>
							</Column>
						</columns>
						<items>
							<ColumnListItem>
								<cells>
									<Text text="{i18n>Participation%}"/>
									<Text text=""/>
									<Select change="onChangeCustomerPer" items="{LocalDataModel>/DataPercent}" enabled="{LocalDataModel>/PercentState}"
										selectedKey="{path:'DataPercetCalculate>/CustomerPer'}">
										<core:Item key="{LocalDataModel>okey}" text="{LocalDataModel>num}"/>
									</Select>
									<Select items="{LocalDataModel>/DataPercent}" enabled="{LocalDataModel>/PercentState}" selectedKey="{DataPercetCalculate>/DealerPer}">
										<core:Item key="{LocalDataModel>okey}" text="{LocalDataModel>num}"/>
									</Select>
									<Select items="{LocalDataModel>/DataPercent}" enabled="{LocalDataModel>/PercentState}" selectedKey="{DataPercetCalculate>/TCIPer}">
										<core:Item key="{LocalDataModel>okey}" text="{LocalDataModel>num}"/>
									</Select>
								</cells>
							</ColumnListItem>
							<ColumnListItem>
								<cells>
									<Text text="{i18n>Participation$}"/>
									<Text text="{LocalDataModel>/oRepairAmt}"/>
									<Text text="{DataPercetCalculate>/CustomerAmt}"/>
									<Text text="{DataPercetCalculate>/DealerAmt}"/>
									<Text text="{DataPercetCalculate>/TCIAmt}"/>
								</cells>
							</ColumnListItem>
						</items>
					</Table>
					<Table showSeparators="All" id="idDiscountTable" busy="{LocalDataModel>/discountBusyIndicator}" visible="false">
						<columns>
							<Column hAlign="Center"></Column>
							<Column hAlign="Center">
								<Label text="{i18n>Parts}"/>
							</Column>
							<Column hAlign="Center">
								<Label text="{i18n>Labour}"/>
							</Column>
							<Column hAlign="Center">
								<Label text="{i18n>Sublet}"/>
							</Column>
						</columns>
						<items>
							<ColumnListItem>
								<cells>
									<Text text="{i18n>Discount%}"/>
									<Select change="onChangeCustomerPer" items="{LocalDataModel>/DataPercent}" enabled="{LocalDataModel>/PercentState}"
										selectedKey="{path:'DataPercetCalculate>/PartPer'}">
										<core:Item key="{LocalDataModel>okey}" text="{LocalDataModel>num}"/>
									</Select>
									<Select items="{LocalDataModel>/DataPercent}" enabled="{LocalDataModel>/PercentState}" selectedKey="{DataPercetCalculate>/LabourPer}">
										<core:Item key="{LocalDataModel>okey}" text="{LocalDataModel>num}"/>
									</Select>
									<Select items="{LocalDataModel>/DataPercent}" enabled="{LocalDataModel>/PercentState}" selectedKey="{DataPercetCalculate>/SubletPer}">
										<core:Item key="{LocalDataModel>okey}" text="{LocalDataModel>num}"/>
									</Select>
								</cells>
							</ColumnListItem>
							<ColumnListItem>
								<cells>
									<Text text="{i18n>Discount$}"/>
									<Text text="{DataPercetCalculate>/PartPerAmt}"/>
									<Text text="{DataPercetCalculate>/LabourPerAmt}"/>
									<Text text="{DataPercetCalculate>/SubletPerAmt}"/>
								</cells>
							</ColumnListItem>
						</items>
					</Table>
				</html:div>
				<html:div >
					<Button text="{i18n>RecalculateClaimAmount}" visible="{LocalDataModel>/reCalculate}" enabled="{DateModel>/oFormEdit}"
						press="onPressRecalculate" type="Emphasized"/>
				</html:div>
			</l:Grid>
		</l:VerticalLayout>
		<table:Table id="idPercentTable" class="classRCPTable" selectionMode="Single" rows="{path:'LocalDataModel>/ClaimSumAuth'}"
			visibleRowCountMode="Auto" rowSelectionChange="onNavigate" selectionBehavior="Row" showNoData="true" threshold="20"
			enableBusyIndicator="true">
			<table:columns autoResizable="true">
				<table:Column width="9rem">
					<table:multiLabels>
						<Label text="" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="{path:'LocalDataModel>ItemType', formatter: 'zclaimProcessing.utils.formatter.fnFormatText'}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="10rem">
					<table:multiLabels>
						<Label text="{i18n>Amount}" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="${LocalDataModel>Amount}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="{i18n>Markup%}" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="{path:'LocalDataModel>MarkupRate', formatter:'zclaimProcessing.utils.formatter.fnFormatPercent'}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="{i18n>MarkupAmount}" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="${path:'LocalDataModel>MarkupAmt'}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="{i18n>subtotal}" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="${LocalDataModel>SubtotalAmt}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="10rem">
					<table:multiLabels>
						<Label text="{i18n>Discount%}" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="{path:'LocalDataModel>DiscountRate', formatter:'zclaimProcessing.utils.formatter.fnFormatPercent'}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="{i18n>DiscountAmount}" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="${LocalDataModel>DiscountAmt}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="{i18n>ClaimAmount}" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="${LocalDataModel>ClaimAmt}" wrapping="true"/>
					</table:template>
				</table:Column>
				<table:Column width="11rem">
					<table:multiLabels>
						<Label text="{i18n>AuthorizedAmount}" textAlign="Center" width="100%"/>
					</table:multiLabels>
					<table:template>
						<Text text="${LocalDataModel>AuthAmt}" wrapping="true"/>
					</table:template>
				</table:Column>
			</table:columns>
		</table:Table>
	</VBox>
	<VBox justifyContent="Center" alignContent="Center" alignItems="Center" class="sapUiLargeMarginBottom">
		<!--<Text class="sapUiSmallMarginBottom" text="What is the source of this info. Authorization that was converted to Calim?"/>-->
		<HBox>
			<Button text="{i18n>Back}" class="sapUiTinyMarginEnd" type="Back" press="onStep02Back"/>
			<Button text="{i18n>Next}" type="Emphasized" press="onStep02Next"/>
		</HBox>
	</VBox>
</core:FragmentDefinition>