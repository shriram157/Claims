<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:u="sap.ui.unified" xmlns:l="sap.ui.layout"
	xmlns="sap.m" xmlns:t="sap.ui.table">
	<VBox class="sapUiSmallMargin clFormTitleGap" id="idPartForm">
		<Panel width="auto" class="sapUiSmallMarginBottom" accessibleRole="Region">
			<headerToolbar>
				<Toolbar height="3rem">
					<Title text="{i18n>PartsDetails}"/>
					<ToolbarSpacer/>
					<Title text="{i18n>TCIClaimNumber}: {HeadSetData>/NumberOfWarrantyClaim}" textAlign="End"/>
				</Toolbar>
			</headerToolbar>
			<OverflowToolbar class="headerButtonsToolBar">
				<Button text="{i18n>AddPartLine}" type="Emphasized" enabled="{DateModel>/oFormEdit}" press="onPressAddPart"/>
				<Button text="{i18n>UpdatePartLine}" press="onPressUpdatePart" class="sapUiTinyMarginBeginEnd" enabled="{DateModel>/oFormEdit}"/>
				<Button text="{i18n>DeletePartLine}" press="onPressDeletePart" class="sapUiTinyMarginBeginEnd" type="Reject"
					enabled="{DateModel>/oFormEdit}"/>
				<Button text="{i18n>letterOfIntent}" class="sapUiTinyMarginBeginEnd" enabled="{DateModel>/oLetterOfIntent}" press="onPressLetterOfIntent"/>
				<ToolbarSpacer/>
				<Button text="{i18n>SaveClaim}" class="sapUiTinyMarginBeginEnd" type="Emphasized" enabled="{DateModel>/oFormEdit}"
					press="onPressSavePartClaim"/>
			</OverflowToolbar>
			<VBox class="clBgColor">
				<f:SimpleForm editable="true" labelSpanL="12" width="90%" title="" labelSpanXL="12" layout="ResponsiveGridLayout" emptySpanXL="0"
					emptySpanL="0" columnsM="4" columnsL="4" columnsXL="4">
					<f:content>
						<HBox>
							<Label text="{i18n>DamageCondition } " class="sapUiSmallMargin" textAlign="Begin" visible="{multiHeaderConfig>/partDamage}"/>
							<Select valueState="{DateModel>/ddType}" width="15rem" id="DmgCodes" enabled="{DateModel>/partLine}" change="onDDChange" showSecondaryValues="false"
								items="{DropDownModel>/items}" visible="{multiHeaderConfig>/partDamage}" selectedKey="{HeadSetData>/DamageCondition}">
								<core:ListItem key="{DropDownModel>DiscreCode}" text="{path:'DropDownModel>ALMDiscreDesc'}" additionalText="{DropDownModel>ALMDiscreCode}"/>
							</Select>
							<Label text="{i18n>DiscrepancyType}" class="sapUiSmallMargin" textAlign="Begin" visible="{multiHeaderConfig>/partDiscrepancies}"/>
							<Select valueState="{DateModel>/ddType}" width="15rem" id="DscpCodes" enabled="{DateModel>/partLine}" change="onDDChange" showSecondaryValues="false"
								items="{DropDownModel>/items}" visible="{multiHeaderConfig>/partDiscrepancies}" selectedKey="{HeadSetData>/DiscrepancyCodes}">
								<core:ListItem key="{DropDownModel>DiscreCode}" text="{path:'DropDownModel>ALMDiscreDesc'}" additionalText="{DropDownModel>ALMDiscreCode}"/>
							</Select>
							<Label text="{i18n>MiscellaneousCode} " class="sapUiSmallMargin" textAlign="Begin" visible="{multiHeaderConfig>/partMiscellanious}"/>
							<Select valueState="{DateModel>/ddType}" width="15rem" id="MscCodes" enabled="{DateModel>/partLine}" change="onDDChange" showSecondaryValues="false"
								items="{DropDownModel>/items}" visible="{multiHeaderConfig>/partMiscellanious}" selectedKey="{HeadSetData>/MiscellaneousCode}">
								<core:ListItem key="{DropDownModel>DiscreCode}" text="{path:'DropDownModel>ALMDiscreDesc'}" additionalText="{DropDownModel>ALMDiscreCode}"/>
							</Select>
							<Label text="{i18n>TranportShortageType} " class="sapUiSmallMargin" textAlign="Begin" visible="{multiHeaderConfig>/partTransportation}"/>
							<Select valueState="{DateModel>/ddType}" width="15rem" id="TransportCodes" enabled="{DateModel>/partLine}" change="onDDChange" showSecondaryValues="false"
								items="{DropDownModel>/items}" visible="{multiHeaderConfig>/partTransportation}" selectedKey="{HeadSetData>/TranportShortageType}">
								<core:ListItem key="{DropDownModel>DiscreCode}" text="{path:'DropDownModel>ALMDiscreDesc'}" additionalText="{DropDownModel>ALMDiscreCode}"/>
							</Select>
						</HBox>
						<HBox>
							<Label text=""/>
							<Button text="{i18n>SavePart}" type="Emphasized" class="sapUiSmallMarginEnd" press="onPressSavePart" enabled="{DateModel>/saveParts}">
								<layoutData>
									<l:GridData span="XL1 L1 M3 S4"/>
								</layoutData>
							</Button>
						</HBox>
					</f:content>
				</f:SimpleForm>
				<VBox class="clBgColor">
					<f:SimpleForm id="idRow01Form" class="sapUiSmallMarginBegin borderStyle" width="100%" editable="true" labelSpanL="12" title=""
						labelSpanXL="12" layout="ResponsiveGridLayout" columnsM="7" columnsL="6" columnsXL="6">
						<!--<f:SimpleForm id="idRow01Form" class="sapUiResponsiveMargin ClsubHeadingLineHeight borderStyle" width="90%" layout="ResponsiveGridLayout">-->
						<f:content>
							<core:Title text=""/>
							<Label text=""/>
							<Text text="{i18n>Ordered}"/>
							<core:Title text=""/>
							<Label text="{i18n>Line}"></Label>
							<Input value="{ path : 'PartDataModel>/LineNo', type: 'sap.ui.model.type.Integer', constraints:{minimum:0}}" required="false"
								enabled="{DateModel>/partLine}"></Input>
							<core:Title text=""/>
							<Label text="{i18n>PartNumberOrdered}" width="10rem"></Label>
							<Input value="{PartDataModel>/matnr}" required="true" id="idPartNumber" showValueHelp="true" valueHelpOnly="true"
								valueHelpRequest="handlePNValueHelp" enabled="{DateModel>/partLine}"></Input>
							<core:Title text=""/>
							<Label text="{i18n>PartDescription}"></Label>
							<Input id="idOrderedPartDesc" value="{PartDataModel>/PartDescription}" editable="{multiHeaderConfig>/OrderedPartDesc}"></Input>
							<core:Title text=""/>
							<Label text="{i18n>Quantity}"></Label>
							<Input value="{path : 'PartDataModel>/quant', type : 'sap.ui.model.type.Integer', constraints : { minLength : 1, maxLength : 10 }}"
								required="true" enabled="{DateModel>/partLine}" valueState="{DateModel>/partTypeState}">
								<layoutData>
									<l:GridData span="XL8 L8"/>
								</layoutData>
							</Input>
						</f:content>
					</f:SimpleForm>
					<f:SimpleForm id="idRow02Form" class="sapUiResponsiveMargin ClsubHeadingLineHeight borderStyle2" width="100%" layout="ResponsiveGridLayout"
						editable="true" labelSpanL="12" labelSpanXL="12" columnsM="6" columnsL="{multiHeaderConfig>/multiheader5}"
						columnsXL="{multiHeaderConfig>/multiheader5}">
						<f:content>
							<core:Title text=""/>
							<Text text="" id="textHeaderLabel"/>
							<core:Title text=""/>
							<UploadCollection id="UploadCollection" uploadEnabled="{LocalDataModel>/UploadEnable}" change="onUploadChangeParts"
								uploadComplete="onUploadComplete02Parts" fileDeleted="onFileDeleted02" visible="{multiHeaderConfig>/uploader}"
								items="{ path: 'LocalDataModel>/partItemAttachments', templateShareable: false }">
								<toolbar>
									<OverflowToolbar>
										<Breadcrumbs id="breadcrumbs" currentLocationText="{LocalDataModel>/currentLocationText}" links="{LocalDataModel>/partsHistory}">
											<Link press="onBreadcrumbPress" text="{LocalDataModel>fileName}"/>
										</Breadcrumbs>
										<ToolbarSpacer/>
										<UploadCollectionToolbarPlaceholder/>
									</OverflowToolbar>
								</toolbar>
								<items>
									<UploadCollectionItem documentId="{LocalDataModel>DOC_ID}" fileName="{LocalDataModel>FileName}" mimeType="{LocalDataModel>MIMETYPE}"
										thumbnailUrl="{LocalDataModel>url}" url="{LocalDataModel>URI}" enableEdit="{settings>/enableEdit}" enableDelete="{settings>/enableDelete}"
										visibleDelete="{settings>/visibleDelete}" visibleEdit="{settings>/visibleEdit}"></UploadCollectionItem>
								</items>
							</UploadCollection>
							<Label text="{i18n>RetainPart}" visible="{multiHeaderConfig>/RetainPartV}" required="true"/>
							<Select valueState="{DateModel>/RetainPartType}" change="onRetainChange" selectedKey="{PartDataModel>/RetainPart}" visible="{multiHeaderConfig>/RetainPartV}" enabled="{DateModel>/partLine}">
								<items>
									<core:Item text="" key=""/>
									<core:Item text="{i18n>Yes}" key="Yes"/>
									<core:Item text="{i18n>No}" key="No"/>
								</items>
								<layoutData>
									<l:GridData span="XL8 L8"/>
								</layoutData>
							</Select>
							<core:Title text=""/>
							<Label text="{i18n>PartNumberReceived}" width="10rem" visible="{multiHeaderConfig>/PartNumberRcV}"/>
							<!--<Input value="{ path : 'HeadSetData>/PartNumberRc'}" editable="{multiHeaderConfig>/PartNumberEdit}" required="true"-->
							<!--	visible="{multiHeaderConfig>/PartNumberRcV}"></Input>-->
							<Input value="{HeadSetData>/PartNumberRc}" id="idPartNumber2" required="true" showValueHelp="true" valueHelpOnly="true"
								editable="{multiHeaderConfig>/PartNumberEdit}" valueHelpRequest="handlePNValueHelp02" enabled="{DateModel>/partLine}"
								visible="{multiHeaderConfig>/PartNumberRcV}"></Input>
							<core:Title text=""/>
							<Label text="{i18n>PartDescription}" visible="{multiHeaderConfig>/PartDescriptionOrdRcv}"/>
							<Input value="{ path : 'HeadSetData>/PartNumberRcDesc'}" id="idOrderedReceivedPartDesc" editable="{multiHeaderConfig>/OrderedPartDesc}"
								visible="{multiHeaderConfig>/PartDescriptionOrdRcv}" enabled="{DateModel>/partLine}"></Input>
							<Label text="{i18n>PartRepaired}" visible="{multiHeaderConfig>/PartRepaired}"/>
							<Select visible="{multiHeaderConfig>/PartRepaired}" selectedKey="{HeadSetData>/PartRepaired}" enabled="{DateModel>/partLine}" change="onPartRepairedChange">
								<items>
									<core:Item text="" key=""/>
									<core:Item text="{i18n>Yes}" key="Yes"/>
									<core:Item text="{i18n>No}" key="No"/>
								</items>
							</Select>
							<core:Title text=""/>
							<!--<Label text="Dealer Net Price" visible="{multiHeaderConfig>/DealerNetPrcV}"></Label>-->
							<!--<Input id="idDealerNetPrc" visible="{multiHeaderConfig>/DealerNetPrcV}" editable="{multiHeaderConfig>/DealerNetPrcEdt}" maxLength="3"></Input>-->
							<Label text="{i18n>RepairAmount}" visible="{multiHeaderConfig>/RepairAmtV}"></Label>
							<Input id="idReceivedAmt" value="{HeadSetData>/RepairAmount}" type="Number" visible="{multiHeaderConfig>/RepairAmtV}"
								enabled="{DateModel>/partLine}"></Input>
							<core:Title text=""/>
							<Label text="{i18n>Quantity}"></Label>
							<Input
								value="{path : 'PartDataModel>/QuantityReceived', type : 'sap.ui.model.type.Integer', formatOptions : { groupingEnabled : true }, constraints : { minimum : 0, maximum : 100 } }"
								required="true" id="idReceivedQnt" enabled="{DateModel>/partLine}" change="ValidQty" valueState="{DateModel>/partTypeState}">
								<!--<Input-->
								<!--	value="{ path : 'PartDataModel>/QuantityReceived', type : 'sap.ui.model.type.Integer', formatOptions : { groupingEnabled : true }, constraints : { minimum : 50, maximum : 10000000 } }"-->
								<!--	required="true" id="idReceivedQnt">-->
								<layoutData>
									<l:GridData span="XL8 L8"/>
								</layoutData>
							</Input>
						</f:content>
					</f:SimpleForm>
				</VBox>
			</VBox>
			<!--</l:Grid>-->
			<Table id="partTable" mode="MultiSelect" items="{LocalDataModel>/PricingDataModel}" class="sapUiMediumMarginTop"
				selectionChange="OnSelectionChange">
				<columns>
					<Column>
						<Text text="{i18n>Line}"/>
					</Column>
					<Column visible="{multiHeaderConfig>/DiscrepancyCol}">
						<Text text="{i18n>DiscrepancyType}"/>
					</Column>
					<Column visible="{multiHeaderConfig>/DamageConditionCol}">
						<Text text="{i18n>DamageCondition}"/>
					</Column>
					<Column visible="{multiHeaderConfig>/MiscellaneousCol}">
						<Text text="{i18n>MiscellaneousCode}"/>
					</Column>
					<Column visible="{multiHeaderConfig>/TransportCol}">
						<Text text="{i18n>TransportationStorage}"/>
					</Column>
					<Column>
						<Text text="{i18n>PartNumber}*"/>
					</Column>
					<Column>
						<Text text="{i18n>Description}" width="15rem"/>
					</Column>
					<Column>
						<Text text="{i18n>DealerNetPrice}"/>
					</Column>
					<Column>
						<Text text="{i18n>Quantity}"/>
					</Column>
					<Column visible="{multiHeaderConfig>/DiscrepancyCol}">
						<Text text="{i18n>ClaimQuantity}"/>
					</Column>
					<!--SAPQuant-->
					<Column visible="{multiHeaderConfig>/RetainPartCol}">
						<Text text="{i18n>RetainPart}"/>
					</Column>
					<Column visible="{multiHeaderConfig>/PartRepCol}">
						<Text text="{i18n>PartRepaired}"/>
						<footer><Text text="{i18n>Subtotal}" textAlign="Center" width="100%"/></footer>
					</Column>
					<Column visible="{multiHeaderConfig>/RepAmountCol}">
						<Text text="{i18n>RepairAmount}"/>
						<!--<footer><Text text="{path: 'LocalDataModel>DifferenceTotal'}" textAlign="Center"-->
						<!--	width="100%"/></footer>-->
						<footer><Text text="{path: 'LocalDataModel>/PricingDataModel', formatter: 'zclaimProcessing.utils.formatter.fnAmountRepairPW'}" textAlign="Center"
							width="100%"/></footer>
					</Column>
					<Column>
						<Text text="{i18n>AmountClaimed}"/>
						<!--<footer><Text text="{path: 'LocalDataModel>AmountClaimedTotal'}" textAlign="Center"-->
						<!--	width="100%"/></footer>-->
						<footer><Text text="{path: 'LocalDataModel>/PricingDataModel', formatter: 'zclaimProcessing.utils.formatter.fnAmountClaimedPW'}" textAlign="Center"
							width="100%"/></footer>
					</Column>
					<Column visible="{multiHeaderConfig>/AttachmentCol}">
						<Text text="{i18n>Attachments}"/>
					</Column>
					<Column>
						<Text text="{i18n>TCIAmountApproved}"/>
						<!--<footer><Text text="{path: 'LocalDataModel>TCIApprovedAmtTotal'}" textAlign="Center"-->
						<!--	width="100%"/></footer>-->
						<footer><Text text="{path: 'LocalDataModel>/PricingDataModel', formatter: 'zclaimProcessing.utils.formatter.fnTCIAprrovedPW'}" textAlign="Center"
							width="100%"/></footer>
					</Column>
					<Column>
						<Text text="{i18n>Difference}"/>
						<footer><Text text="{path: 'LocalDataModel>/PricingDataModel', formatter: 'zclaimProcessing.utils.formatter.fnDifPW'}" textAlign="Center"
							width="100%"/></footer>
						<!--<footer><Text text="{path: 'LocalDataModel>DifferenceTotal'}" textAlign="Center"-->
						<!--	width="100%"/></footer>-->
						<!--DifferenceTotal-->
					</Column>
				</columns>
				<items>
					<ColumnListItem vAlign="Middle">
						<cells>
							<!--path: 'LocalDataModel>TCIApprovedAmount', formatter: 'zclaimProcessing.utils.formatter.roundedDecimals'-->
							<Text text="{LocalDataModel>posnr}"/>
							<Text text="{LocalDataModel>ALMDiscreDesc}"/>
							<Text text="{LocalDataModel>ALMDiscreDesc}"/>
							<Text text="{LocalDataModel>ALMDiscreDesc}"/>
							<Text text="{LocalDataModel>ALMDiscreDesc}"/>
							<!--<Text text="{LocalDataModel>DamageTypeCode>}"/>-->
							<Text text="{LocalDataModel>matnr}"/>
							<Text text="{LocalDataModel>PartDescription}"/>
							<Text text="{path: 'LocalDataModel>DealerNet', formatter: 'zclaimProcessing.utils.formatter.roundedDecimals'}"/>
							<Text text="{LocalDataModel>quant2}"/>
							<Text text="{LocalDataModel>quant}"/>
							<Text text="{LocalDataModel>RetainPart}"/>
							<Text text="{LocalDataModel>PartRepaired}"/>
							<Text text="{path: 'LocalDataModel>RepairAmt', formatter: 'zclaimProcessing.utils.formatter.roundedDecimals'}"/>
							<Text text="{path: 'LocalDataModel>AmtClaimed', formatter: 'zclaimProcessing.utils.formatter.roundedDecimals'}"/>
							<Link visible="{multiHeaderConfig>/AttachmentCol}" press="onClickURIParts" href="{LocalDataModel>URI}" text="View Attachment" target="_blank" textAlign="Center" width="100%"/>
							<!--<Text text="{LocalDataModel>URI}"/>-->
							<Text text="{path: 'LocalDataModel>TCIApprovedAmount', formatter: 'zclaimProcessing.utils.formatter.roundedDecimals'}"/>
							<Text text="{path: 'LocalDataModel>DiffAmt', formatter: 'zclaimProcessing.utils.formatter.roundedDecimals'}"/>
						</cells>
					</ColumnListItem>
				</items>
			</Table>
			<HBox alignContent="Center" justifyContent="Center" class="sapUiTinyMarginTop">
				<Button class="sapUiTinyMarginBeginEnd" type="Back" press="onPressBack" text="{i18n>Back}"/>
				<Button class="sapUiTinyMarginBeginEnd" press="onStep03Next" text="{i18n>Next}" type="Emphasized"/>
			</HBox>
		</Panel>
	</VBox>
</core:FragmentDefinition>