<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:u="sap.ui.unified" xmlns:l="sap.ui.layout"
	xmlns="sap.m" xmlns:t="sap.ui.table">
	<VBox class="sapUiSmallMargin clFormTitleGap" id="idPartForm">
		<Panel width="auto" class="sapUiSmallMarginBottom" accessibleRole="Region">
			<headerToolbar>
				<Toolbar height="3rem">
					<Title text="Parts Details"/>
					<ToolbarSpacer/>
					<Title text="TCI Claim Number: {HeadSetData>/NumberOfWarrantyClaim}" textAlign="End"/>
				</Toolbar>
			</headerToolbar>
			<OverflowToolbar class="headerButtonsToolBar">
				<Button text="Add Part Line" type="Emphasized" enabled="{DateModel>/oFormEdit}" press="onPressAddPart"/>
				<Button text="Update Part Line" press="onPressUpdatePart" class="sapUiTinyMarginBeginEnd" enabled="{DateModel>/oFormEdit}"/>
				<Button text="Delete Part Line" press="onPressDeletePart" class="sapUiTinyMarginBeginEnd" type="Reject" enabled="{DateModel>/oFormEdit}"/>
				<Button text="Letter Of Intent" class="sapUiTinyMarginBeginEnd" enabled="{DateModel>/oLetterOfIntent}" press="onPressLetterOfIntent"/>
				<ToolbarSpacer/>
				<Button text="Save Claim" class="sapUiTinyMarginBeginEnd" type="Emphasized" enabled="{DateModel>/oFormEdit}" press="onPressSavePartClaim"/>
			</OverflowToolbar>
			<VBox class="clBgColor">
				<f:SimpleForm editable="true" labelSpanL="12" width="90%" title="" labelSpanXL="12" layout="ResponsiveGridLayout" emptySpanXL="0"
					emptySpanL="0" columnsM="4" columnsL="4" columnsXL="4">
					<f:content>
						<HBox>
							<Label text="{i18n>DamageCondition } " class="sapUiSmallMargin" textAlign="Begin" visible="{multiHeaderConfig>/partDamage}"/>
							<Select width="15rem" id="DmgCodes" enabled="{DateModel>/partLine}" change="onDDChange" showSecondaryValues="false" items="{DropDownModel>/items}" visible="{multiHeaderConfig>/partDamage}"
								selectedKey="{HeadSetData>/DamageCondition}">
								<core:ListItem key="{DropDownModel>DiscreCode}" text="{path:'DropDownModel>ALMDiscreDesc'}" additionalText="{DropDownModel>ALMDiscreCode}"/>
							</Select>
							<Label text="{i18n>DiscrepancyType}" class="sapUiSmallMargin" textAlign="Begin" visible="{multiHeaderConfig>/partDiscrepancies}"/>
							<Select width="15rem" id="DscpCodes" enabled="{DateModel>/partLine}" change="onDDChange" showSecondaryValues="false" items="{DropDownModel>/items}" visible="{multiHeaderConfig>/partDiscrepancies}"
								selectedKey="{HeadSetData>/DiscrepancyCodes}">
								<core:ListItem key="{DropDownModel>DiscreCode}" text="{path:'DropDownModel>ALMDiscreDesc'}" additionalText="{DropDownModel>ALMDiscreCode}"/>
							</Select>
							<Label text="{i18n>MiscellaneousCode} " class="sapUiSmallMargin" textAlign="Begin" visible="{multiHeaderConfig>/partMiscellanious}"/>
							<Select width="15rem" id="MscCodes" enabled="{DateModel>/partLine}" change="onDDChange" showSecondaryValues="false" items="{DropDownModel>/items}" visible="{multiHeaderConfig>/partMiscellanious}"
								selectedKey="{HeadSetData>/MiscellaneousCode}">
								<core:ListItem key="{DropDownModel>DiscreCode}" text="{path:'DropDownModel>ALMDiscreDesc'}" additionalText="{DropDownModel>ALMDiscreCode}"/>
							</Select>
							<Label text="{i18n>TranportShortageType} " class="sapUiSmallMargin" textAlign="Begin" visible="{multiHeaderConfig>/partTransportation}"/>
							<Select width="15rem" id="TransportCodes" enabled="{DateModel>/partLine}" change="onDDChange" showSecondaryValues="false" items="{DropDownModel>/items}" visible="{multiHeaderConfig>/partTransportation}"
								selectedKey="{HeadSetData>/TranportShortageType}">
								<core:ListItem key="{DropDownModel>DiscreCode}" text="{path:'DropDownModel>ALMDiscreDesc'}" additionalText="{DropDownModel>ALMDiscreCode}"/>
							</Select>
						</HBox>
						<HBox>
							<Label text=""/>
							<Button text="{i18n>SavePart}" type="Emphasized" class="sapUiSmallMarginEnd" press="onPressSavePart" enabled="{DateModel>/saveParts}">
								<layoutData>
									<l:GridData span="XL1 L1 M3 S4"/>
								</layoutData>
							</Button>
						</HBox>
					</f:content>
				</f:SimpleForm>
				<!--<l:Grid containerQuery="true" defaultSpan="XL12 L12 M12 S12"> -->
				<!--wrap="Wrap" displayInline="true" alignContent="Center" visible="true" width="100%"-->
				<VBox class="clBgColor">
					<f:SimpleForm id="idRow01Form" class="sapUiSmallMarginBegin borderStyle" width="100%" editable="true" labelSpanL="12" title=""
						labelSpanXL="12" layout="ResponsiveGridLayout" columnsM="7" columnsL="6" columnsXL="6">
						<!--<f:SimpleForm id="idRow01Form" class="sapUiResponsiveMargin ClsubHeadingLineHeight borderStyle" width="90%" layout="ResponsiveGridLayout">-->
						<f:content>
							<core:Title text=""/>
							<Label text=""/>
							<Text text="Ordered"/>
							<core:Title text=""/>
							<Label text="Line #:"></Label>
							<Input value="{ path : 'PartDataModel>/LineNo', type: 'sap.ui.model.type.Integer', constraints:{minimum:0}}"
								required="false" enabled="{DateModel>/partLine}"></Input>
							<core:Title text=""/>
							<Label text="Part Number Ordered" width="10rem"></Label>
							<Input value="{PartDataModel>/matnr}" required="true" id="idPartNumber" showValueHelp="true" valueHelpOnly="true"
								valueHelpRequest="handlePNValueHelp" enabled="{DateModel>/partLine}"></Input>
							<core:Title text=""/>
							<Label text="Part Description"></Label>
							<Input id="idOrderedPartDesc" value="{PartDataModel>/PartDescription}" editable="{multiHeaderConfig>/OrderedPartDesc}"></Input>
							<core:Title text=""/>
							<Label text="Quantity"></Label>
							<Input value="{path : 'PartDataModel>/quant', type : 'sap.ui.model.type.Integer', constraints : { minLength : 1, maxLength : 10 }}"
								required="true" enabled="{DateModel>/partLine}" valueState="{DateModel>/partTypeState}" >
								<layoutData>
									<l:GridData span="XL8 L8"/>
								</layoutData>
							</Input>
						</f:content>
					</f:SimpleForm>
					<f:SimpleForm id="idRow02Form" class="sapUiResponsiveMargin ClsubHeadingLineHeight borderStyle2" width="100%" layout="ResponsiveGridLayout"
						editable="true" labelSpanL="12" labelSpanXL="12" columnsM="6" columnsL="{multiHeaderConfig>/multiheader5}"
						columnsXL="{multiHeaderConfig>/multiheader5}">
						<f:content>
							<core:Title text=""/>
							<Text text="Claimed"/>
							<core:Title text=""/>
							<UploadCollection id="UploadCollection" class="uploadContainer" change="onUploadChange02Parts" uploadComplete="onUploadComplete02Parts"
								fileDeleted="onFileDeleted02" visible="{multiHeaderConfig>/uploader}" items="{ path: 'AttachmentModel>/items', templateShareable: false }">
								<toolbar>
									<OverflowToolbar>
										<Breadcrumbs id="breadcrumbs" currentLocationText="{AttachmentModel>/currentLocationText}" links="{AttachmentModel>/partsHistory}">
											<Link press="onBreadcrumbPress" text="{AttachmentModel>name}"/>
										</Breadcrumbs>
										<ToolbarSpacer/>
										<UploadCollectionToolbarPlaceholder/>
									</OverflowToolbar>
								</toolbar>
								<items>
									<UploadCollectionItem selected="onSelectUpload" documentId="{AttachmentModel>DOC_ID}" fileName="{AttachmentModel>FileName}"
										mimeType="{AttachmentModel>MIMETYPE}" thumbnailUrl="{AttachmentModel>url}" url="{AttachmentModel>URI}" enableEdit="{settings>/enableEdit}"
										enableDelete="{settings>/enableDelete}" visibleDelete="{settings>/visibleDelete}" visibleEdit="{settings>/visibleEdit}">
										<layoutData>
											<l:GridData span="XL8 L8"/>
										</layoutData>
									</UploadCollectionItem>
								</items>
							</UploadCollection>
							<!--<core:Title text=""/>-->
							<Label text="Retain Part" visible="{multiHeaderConfig>/RetainPartV}"/>
							<Select selectedKey="{PartDataModel>/RetainPart}" visible="{multiHeaderConfig>/RetainPartV}"  enabled="{DateModel>/partLine}" >
								<items>
									<core:Item text="" key=""/>
									<core:Item text="Yes" key="Yes"/>
									<core:Item text="No" key="No"/>
								</items>
								<layoutData>
									<l:GridData span="XL8 L8"/>
								</layoutData>
							</Select>
							<core:Title text=""/>
							<Label text="Part Number Received" width="10rem" visible="{multiHeaderConfig>/PartNumberRcV}"/>
							<!--<Input value="{ path : 'HeadSetData>/PartNumberRc'}" editable="{multiHeaderConfig>/PartNumberEdit}" required="true"-->
							<!--	visible="{multiHeaderConfig>/PartNumberRcV}"></Input>-->
							<Input value="{HeadSetData>/PartNumberRc}" id="idPartNumber2" required="true" showValueHelp="true" valueHelpOnly="true" editable="{multiHeaderConfig>/PartNumberEdit}" 
								valueHelpRequest="handlePNValueHelp02" enabled="{DateModel>/partLine}" visible="{multiHeaderConfig>/PartNumberRcV}"></Input>
							<core:Title text=""/>
							<Label text="Part Description" visible="{multiHeaderConfig>/PartDescriptionOrdRcv}"/>
							<Input value="{ path : 'HeadSetData>/PartNumberRcDesc'}" id="idOrderedReceivedPartDesc" editable="{multiHeaderConfig>/OrderedPartDesc}"
								visible="{multiHeaderConfig>/PartDescriptionOrdRcv}"  enabled="{DateModel>/partLine}" ></Input>
							<Label text="Part Repaired?" visible="{multiHeaderConfig>/PartRepaired}" />
							<Select visible="{multiHeaderConfig>/PartRepaired}" selectedKey="{HeadSetData>/PartRepaired}" enabled="{DateModel>/partLine}" >
								<items>
									<core:Item text="" key=""/>
									<core:Item text="Yes" key="Yes"/>
									<core:Item text="No" key="No"/>
								</items>
							</Select>
							<core:Title text=""/>
							<!--<Label text="Dealer Net Price" visible="{multiHeaderConfig>/DealerNetPrcV}"></Label>-->
							<!--<Input id="idDealerNetPrc" visible="{multiHeaderConfig>/DealerNetPrcV}" editable="{multiHeaderConfig>/DealerNetPrcEdt}" maxLength="3"></Input>-->
							<Label text="Repair Amount" visible="{multiHeaderConfig>/RepairAmtV}"></Label>
							<Input id="idReceivedAmt" value="{HeadSetData>/RepairAmount}" type="Number" visible="{multiHeaderConfig>/RepairAmtV}"  enabled="{DateModel>/partLine}" ></Input>
							<core:Title text=""/>
							<Label text="Quantity"></Label>
							<Input
								value="{path : 'PartDataModel>/QuantityReceived', type : 'sap.ui.model.type.Integer', formatOptions : { groupingEnabled : true }, constraints : { minimum : 1, maximum : 100 } }"
								required="true" id="idReceivedQnt" enabled="{DateModel>/partLine}" change="ValidQty" valueState="{DateModel>/partTypeState}" >
								<!--<Input-->
								<!--	value="{ path : 'PartDataModel>/QuantityReceived', type : 'sap.ui.model.type.Integer', formatOptions : { groupingEnabled : true }, constraints : { minimum : 50, maximum : 10000000 } }"-->
								<!--	required="true" id="idReceivedQnt">-->
								<layoutData>
									<l:GridData span="XL8 L8"/>
								</layoutData>
							</Input>
						</f:content>
					</f:SimpleForm>
				</VBox>
			</VBox>
			<!--</l:Grid>-->
			<Table id="partTable" mode="MultiSelect" items="{LocalDataModel>/PricingDataModel}" class="sapUiMediumMarginTop"
				selectionChange="OnSelectionChange">
				<columns>
					<Column>
						<Text text="Line #"/>
					</Column>
					<Column visible="{multiHeaderConfig>/DiscrepancyCol}">
						<Text text="Discrepancy Type"/>
					</Column>
					<Column visible="{multiHeaderConfig>/DamageConditionCol}">
						<Text text="Damage Condition"/>
					</Column>
					<Column visible="{multiHeaderConfig>/MiscellaneousCol}">
						<Text text="Miscellaneous Code*"/>
					</Column>
					<Column visible="{multiHeaderConfig>/TransportCol}">
						<Text text="Transportation Storage"/>
					</Column>
					<Column>
						<Text text="Part Number*"/>
					</Column>
					<Column>
						<Text text="Description" width="15rem"/>
					</Column>
					<Column>
						<Text text="Dealer Net Price"/>
					</Column>
					<Column>
						<Text text="Quantity"/>
					</Column>
					<Column visible="{multiHeaderConfig>/DiscrepancyCol}">
						<Text text="Claim Quantity"/>
					</Column>
					<!--SAPQuant-->
					<Column visible="{multiHeaderConfig>/RetainPartCol}">
						<Text text="Retain Part"/>
					</Column>
					<Column visible="{multiHeaderConfig>/PartRepCol}">
						<Text text="Part Repaired"/>
						<footer><Text text="{i18n>Subtotal}" textAlign="Center" width="100%"/></footer>
					</Column>
					<Column visible="{multiHeaderConfig>/RepAmountCol}">
						<Text text="Repair Amount"/>
						<!--<footer><Text text="{path: 'LocalDataModel>DifferenceTotal'}" textAlign="Center"-->
						<!--	width="100%"/></footer>-->
						<footer><Text text="{path: 'LocalDataModel>/PricingDataModel', formatter: 'zclaimProcessing.utils.formatter.fnAmountRepairPW'}" textAlign="Center"
							width="100%"/></footer>
					</Column>
					<Column>
						<Text text="Amount Claimed"/>
						<!--<footer><Text text="{path: 'LocalDataModel>AmountClaimedTotal'}" textAlign="Center"-->
						<!--	width="100%"/></footer>-->
						<footer><Text text="{path: 'LocalDataModel>/PricingDataModel', formatter: 'zclaimProcessing.utils.formatter.fnAmountClaimedPW'}" textAlign="Center"
							width="100%"/></footer>
					</Column>
					<Column visible="{multiHeaderConfig>/AttachmentCol}">
						<Text text="Attachment"/>
					</Column>
					<Column>
						<Text text="TCI Amount Approved"/>
						<!--<footer><Text text="{path: 'LocalDataModel>TCIApprovedAmtTotal'}" textAlign="Center"-->
						<!--	width="100%"/></footer>-->
						<footer><Text text="{path: 'LocalDataModel>/PricingDataModel', formatter: 'zclaimProcessing.utils.formatter.fnTCIAprrovedPW'}" textAlign="Center"
							width="100%"/></footer>
					</Column>
					<Column>
						<Text text="Difference"/>
						<footer><Text text="{path: 'LocalDataModel>/PricingDataModel', formatter: 'zclaimProcessing.utils.formatter.fnDifPW'}" textAlign="Center"
							width="100%"/></footer>
						<!--<footer><Text text="{path: 'LocalDataModel>DifferenceTotal'}" textAlign="Center"-->
						<!--	width="100%"/></footer>-->
						<!--DifferenceTotal-->
					</Column>
				</columns>
				<items>
					<ColumnListItem>
						<cells>
							<Text text="{LocalDataModel>posnr}"/>
							<Text text="{LocalDataModel>ALMDiscreDesc}"/>
							<Text text="{LocalDataModel>ALMDiscreDesc}"/>
							<Text text="{LocalDataModel>ALMDiscreDesc}"/>
							<Text text="{LocalDataModel>ALMDiscreDesc}"/>
							<!--<Text text="{LocalDataModel>DamageTypeCode>}"/>-->
							<Text text="{LocalDataModel>matnr}"/>
							<Text text="{LocalDataModel>PartDescription}"/>
							<Text text="{LocalDataModel>DealerNet}"/>
							<Text text="{LocalDataModel>quant2}"/>
							<Text text="{LocalDataModel>quant}"/>
							<Text text="{LocalDataModel>RetainPart}"/>
							<Text text="{LocalDataModel>PartRepaired}"/>
							<Text text="{LocalDataModel>RepairAmt}"/>
							<Text text="{LocalDataModel>AmtClaimed}"/>
							<Link visible="{multiHeaderConfig>/AttachmentCol}" press="onClickURIParts" href="{LocalDataModel>URI}" text="View Attachment"
								target="_blank" textAlign="Center" width="100%"/>
							<!--<Text text="{LocalDataModel>Attachments}"/>-->
							<Text text="{LocalDataModel>TCIApprovedAmount}"/>
							<Text text="{LocalDataModel>DiffAmt}"/>
						</cells>
					</ColumnListItem>
				</items>
			</Table>
			<HBox alignContent="Center" justifyContent="Center" class="sapUiTinyMarginTop">
				<Button class="sapUiTinyMarginBeginEnd" type="Back" press="onPressBack" text="{i18n>Back}"/>
				<Button class="sapUiTinyMarginBeginEnd" press="onStep03Next" text="{i18n>Next}" type="Emphasized"/>
			</HBox>
		</Panel>
	</VBox>
</core:FragmentDefinition>